# Desktop Frontend Architecture

## Component Hierarchy

```
App.vue
â”‚
â”œâ”€â”€â”€ Login Flow (Desktop)
â”‚    â””â”€â”€â”€ LoginView.vue (/login)
â”‚         â””â”€â”€â”€ authenticates with password â†’ redirects to /admin
â”‚
â”œâ”€â”€â”€ Mobile App Flow (TMA)
â”‚    â”œâ”€â”€â”€ HomeView.vue (/)
â”‚    â”œâ”€â”€â”€ MenuView.vue (/menu)
â”‚    â”œâ”€â”€â”€ OrdersView.vue (/orders)
â”‚    â”œâ”€â”€â”€ ProfileView.vue (/profile)
â”‚    â””â”€â”€â”€ CheckoutView.vue (/checkout)
â”‚
â””â”€â”€â”€ Desktop Admin Flow
     â””â”€â”€â”€ DesktopLayout.vue (/admin)
          â”œâ”€â”€â”€ Collapsible Sidebar
          â”‚    â”œâ”€â”€â”€ Organization Section
          â”‚    â”‚    â”œâ”€â”€â”€ Settings
          â”‚    â”‚    â”œâ”€â”€â”€ Terminals
          â”‚    â”‚    â”œâ”€â”€â”€ Payment Types
          â”‚    â”‚    â””â”€â”€â”€ Menu
          â”‚    â”œâ”€â”€â”€ Orders Section
          â”‚    â”œâ”€â”€â”€ Clients Section
          â”‚    â””â”€â”€â”€ Products Section
          â”‚         â”œâ”€â”€â”€ Products
          â”‚         â””â”€â”€â”€ Modifiers
          â”‚
          â”œâ”€â”€â”€ Header (page title, user info)
          â””â”€â”€â”€ Main Content Area
               â”‚
               â”œâ”€â”€â”€ OrganizationSettings.vue
               â”‚    â””â”€â”€â”€ Form with iiko credentials
               â”‚
               â”œâ”€â”€â”€ TerminalsManagement.vue
               â”‚    â””â”€â”€â”€ Table + "Load from iiko" button
               â”‚
               â”œâ”€â”€â”€ PaymentTypesManagement.vue
               â”‚    â””â”€â”€â”€ Table + "Load from iiko" button
               â”‚
               â”œâ”€â”€â”€ MenuManagement.vue
               â”‚    â”œâ”€â”€â”€ Step 1: Fetch menus button
               â”‚    â””â”€â”€â”€ Step 2: Select & load menu
               â”‚
               â”œâ”€â”€â”€ OrdersManagement.vue
               â”‚    â”œâ”€â”€â”€ Orders table
               â”‚    â”œâ”€â”€â”€ Action icons (eye, refresh)
               â”‚    â””â”€â”€â”€ Order detail modal
               â”‚         â””â”€â”€â”€ Items table
               â”‚
               â”œâ”€â”€â”€ UsersManagement.vue
               â”‚    â””â”€â”€â”€ Users + addresses management
               â”‚
               â”œâ”€â”€â”€ ProductsManagement.vue
               â”‚    â”œâ”€â”€â”€ Search & filters
               â”‚    â””â”€â”€â”€ Products table
               â”‚
               â””â”€â”€â”€ ModifiersManagement.vue
                    â”œâ”€â”€â”€ Search
                    â””â”€â”€â”€ Modifiers table
```

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Component                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ uses
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Pinia Store                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ auth.js (existing)                                â”‚  â”‚
â”‚  â”‚  â€¢ organization.js (NEW)                             â”‚  â”‚
â”‚  â”‚  â€¢ products.js (existing)                            â”‚  â”‚
â”‚  â”‚  â€¢ orders.js (existing)                              â”‚  â”‚
â”‚  â”‚  â€¢ cart.js (existing - TMA only)                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ calls
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Service                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ api.js (base axios instance)                      â”‚  â”‚
â”‚  â”‚  â€¢ auth.service.js (existing)                        â”‚  â”‚
â”‚  â”‚  â€¢ organization.service.js (NEW)                     â”‚  â”‚
â”‚  â”‚  â€¢ users.service.js (existing)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ HTTP requests
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend API                               â”‚
â”‚                  (Django REST Framework)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Route Protection Flow

```
User navigates to /admin/organization/settings
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Router Guard â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    Is authenticated?
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    NO               YES
    â”‚                 â”‚
    â–¼                 â–¼
Redirect to      Is Admin?
 /login           (superadmin
                  or org_admin)
                  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                  NO       YES
                  â”‚         â”‚
                  â–¼         â–¼
             Redirect   Allow
              to /      access
```

## Sidebar Navigation Structure

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Admin Panel                    [â˜°]       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                           â•‘
â•‘  ğŸ“‹ ĞĞ Ğ“ĞĞĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯                           â•‘
â•‘    âš™ï¸  ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸                          â•‘
â•‘    ğŸ’»  Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ñ‹                          â•‘
â•‘    ğŸ’³  Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚                         â•‘
â•‘    ğŸ”  ĞœĞµĞ½Ñ                               â•‘
â•‘                                           â•‘
â•‘  ğŸ›’ Ğ—ĞĞšĞĞ—Ğ«                                â•‘
â•‘    ğŸ“‹  Ğ’ÑĞµ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹                         â•‘
â•‘                                           â•‘
â•‘  ğŸ‘¥ ĞšĞ›Ğ˜Ğ•ĞĞ¢Ğ«                               â•‘
â•‘    ğŸ‘¤  ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸                       â•‘
â•‘                                           â•‘
â•‘  ğŸ“¦ ĞŸĞ ĞĞ”Ğ£ĞšĞ¢Ğ«                              â•‘
â•‘    ğŸ•  ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹                           â•‘
â•‘    ğŸ›ï¸  ĞœĞ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹                       â•‘
â•‘                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â•‘
â•‘    ğŸšª  Ğ’Ñ‹Ñ…Ğ¾Ğ´                              â•‘
â•‘                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## State Management: Organization Store

```javascript
organizationStore
â”œâ”€â”€ State
â”‚   â”œâ”€â”€ organization: Object | null
â”‚   â”œâ”€â”€ terminals: Array
â”‚   â”œâ”€â”€ paymentTypes: Array
â”‚   â”œâ”€â”€ externalMenus: Array
â”‚   â”œâ”€â”€ loading: boolean
â”‚   â””â”€â”€ error: string | null
â”‚
â”œâ”€â”€ Getters
â”‚   â”œâ”€â”€ hasOrganization
â”‚   â””â”€â”€ hasIikoCredentials
â”‚
â””â”€â”€ Actions
    â”œâ”€â”€ fetchOrganization()
    â”œâ”€â”€ updateOrganization(data)
    â”œâ”€â”€ fetchTerminals()
    â”œâ”€â”€ loadTerminalsFromIiko()
    â”œâ”€â”€ fetchPaymentTypes()
    â”œâ”€â”€ loadPaymentTypesFromIiko()
    â”œâ”€â”€ fetchExternalMenus()
    â”œâ”€â”€ loadMenuFromIiko(menuId)
    â””â”€â”€ clearError()
```

## Two-Step Menu Loading Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Click "Ğ’Ñ‹Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¼ĞµĞ½Ñ"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API: GET /api/organizations/           â”‚
â”‚       external-menus/                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Display list of available menus        â”‚
â”‚  with radio button selection            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: User selects menu              â”‚
â”‚  Click "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ"       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API: POST /api/organizations/          â”‚
â”‚       load-menu/                        â”‚
â”‚  Body: { external_menu_id: "..." }     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Success: Menu synced from iiko         â”‚
â”‚  Products, categories updated           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Iconify Icons Used

```
Navigation & Actions:
â”œâ”€â”€ mdi:menu / mdi:menu-open    (Sidebar toggle)
â”œâ”€â”€ mdi:office-building         (Organization section)
â”œâ”€â”€ mdi:cog                     (Settings)
â”œâ”€â”€ mdi:tablet                  (Terminals)
â”œâ”€â”€ mdi:credit-card             (Payment types)
â”œâ”€â”€ mdi:food                    (Menu/Products)
â”œâ”€â”€ mdi:shopping                (Orders section)
â”œâ”€â”€ mdi:clipboard-list          (All orders)
â”œâ”€â”€ mdi:account-group           (Clients section)
â”œâ”€â”€ mdi:account-multiple        (Users)
â”œâ”€â”€ mdi:package-variant         (Products section)
â”œâ”€â”€ mdi:food-variant            (Products)
â”œâ”€â”€ mdi:tune                    (Modifiers)
â””â”€â”€ mdi:logout                  (Logout)

Table Actions:
â”œâ”€â”€ mdi:eye                     (View order details)
â”œâ”€â”€ mdi:refresh                 (Refresh status)
â”œâ”€â”€ mdi:download                (Load from iiko)
â”œâ”€â”€ mdi:loading                 (Loading spinner)
â”œâ”€â”€ mdi:check-circle            (Success)
â”œâ”€â”€ mdi:alert-circle            (Error)
â””â”€â”€ mdi:close                   (Close modal)
```

## Responsive Breakpoints

```
Mobile (TMA):
â””â”€â”€ < 1024px: Full mobile experience (unchanged)

Desktop (Admin):
â””â”€â”€ â‰¥ 1024px (lg:): Desktop layout with sidebar
    â”œâ”€â”€ Sidebar: 256px (expanded) | 64px (collapsed)
    â”œâ”€â”€ Main content: calc(100vw - sidebar width)
    â””â”€â”€ Max content width: 7xl (1280px)
```

This architecture ensures a clean separation between the mobile TMA experience and the desktop admin interface while sharing state management and API services where appropriate.
